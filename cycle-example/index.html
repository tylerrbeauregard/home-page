<html>

<head>
    <title>Some Algebra Simulations</title>
</head>

<body style="table {border: none}">
    <h1>Generators of <i>S<sub>n</sub></i></h1>
    <p>Problem (9) of Homework 4 asks us to prove that <i>S<sub>n</sub></i>,
        the symmetric group on <i>n</i> letters, can be generated by (12) and (12...<i>n</i>). This interactive
        webpage can help one to test this out.</p>
    <canvas id="canvas" width="700" height="500"></canvas>
    <br />
    <span>
        <button onclick="permute_big();">Rotate big circle clockwise</button>
        <button onclick="permute_small();">Rotate half circle (1 &LeftRightArrow; 2)</button>
    </span>
    <br />
    <span>
        Number of elements:
        <button onclick="increment_elements()">+</button>
        <button onclick="decrement_elements()">-</button>
    </span></br>
    <span>Current permutation as generators:</span>
    <div style="width:80%; margin:auto">&sigma; = </span><span id="info"></span></div>
    <span>Current permutation:</span>
    <div style="width:50%; margin:auto">
        &sigma; = <span style="font-size: 40px;vertical-align: middle">(</span>
        <table style="display:inline-table;vertical-align: middle;" id="permutation"></table>
        <span style="font-size: 40px;vertical-align: middle">)</span>
    </div>


    <script>
        var number_of_points = 10;
        var permutation = Array(number_of_points);
        for (var i = 0; i < number_of_points; i++) {
            permutation[i] = i;
        }

        function init() {
            window.requestAnimationFrame(draw);
            create_table();
        }

        function create_table() {
            var table = document.getElementById("permutation");
            table.innerHTML = "";
            var row1 = document.createElement("tr");
            var row2 = document.createElement("tr");
            for (var i = 0; i < number_of_points; i++) {
                var item1 = document.createElement("td");
                item1.innerHTML = (i + 1).toString();
                row1.appendChild(item1);
                var item2 = document.createElement("td");
                item2.innerHTML = (permutation[i] + 1).toString();
                row2.appendChild(item2);
            }
            table.appendChild(row1);
            table.appendChild(row2);
        }

        function draw_number_with_circle(ctx, number, x, y, color) {
            ctx.beginPath();
            ctx.save()
            ctx.fillStyle = color;
            ctx.arc(x, y, 20, 0, 2 * Math.PI, false);
            ctx.stroke();
            ctx.fill();

            ctx.font = "32px serif";
            ctx.fillStyle = "black";
            ctx.fillText(number.toString(), x, y + 10);
            ctx.restore();
        }

        function draw_regular_poly_dots(ctx, points, radius, center_x, center_y) {
            var x = center_x;
            var y = center_y;
            var small_radius = 0.7 * radius;
            var angle = 2 * Math.PI / points;

            // Drawing the small half circle between 1 and 2
            ctx.save();
            ctx.strokeStyle = "black";
            ctx.beginPath();
            var x_1 = x + radius * Math.cos(angle * (points));
            var y_1 = y + radius * Math.sin(angle * (points));
            var x_2 = x + radius * Math.cos(angle * (points - 1));
            var y_2 = y + radius * Math.sin(angle * (points - 1));
            var x_circ = (x_1 + x_2) / 2;
            var y_circ = (y_1 + y_2) / 2;
            var circ_radius = Math.sqrt(
                (x_2 - x_1) ** 2 + (y_2 - y_1) ** 2) / 2;
            ctx.arc(x_circ, y_circ, circ_radius, 0, Math.PI * 2, false);
            ctx.stroke();
            ctx.restore();

            ctx.beginPath();
            ctx.fillStyle = "white";
            ctx.arc(x, y, radius, 0, Math.PI * 2, false);
            ctx.stroke();
            // This covers the half-circle.
            ctx.fill();

            for (var i = 0; i < points; i++) {
                ctx.beginPath();
                var to_x = x + radius * Math.cos(angle * (points - i));
                var to_y = y + radius * Math.sin(angle * (points - i));
                var inner_x = x + 0.7 * radius * Math.cos(angle * (points - i));
                var inner_y = y + 0.7 * radius * Math.sin(angle * (points - i));
                ctx.moveTo(to_x, to_y);
                ctx.lineTo(inner_x, inner_y);
                ctx.stroke();
                // Draw the red number on the outside
                draw_number_with_circle(ctx, permutation[i] + 1, to_x, to_y, "red");
                // Draw the silver number on the inside
                draw_number_with_circle(ctx, i + 1, inner_x, inner_y, "silver");
            }
        }

        function draw_legend(ctx, x, y) {
            ctx.save();
            ctx.strokeStyle = "black";
            ctx.beginPath();
            // Box
            ctx.rect(x, y, 130, 30 * 3 + 20);

            // Line
            ctx.moveTo(x, y + 40);
            ctx.lineTo(x + 130, y + 40);
            ctx.stroke();

            ctx.beginPath();
            ctx.font = "30px serif";
            ctx.fillStyle = "black";
            ctx.textAlign = "left";
            ctx.fillText("Legend:", x + 3, y + 30)
            ctx.textAlign = "right";
            ctx.font = "italic 30px serif";
            ctx.fillText("i:", x + 70, y + 5 + 30 * 2);
            //\u03C3 is just lowercase sigma
            ctx.fillText("\u03C3(i):", x + 70, y + 5 + 30 * 3);

            ctx.beginPath();
            ctx.fillStyle = "silver";
            ctx.arc(x + 90, y + 30 * 2, 10, 0, 2 * Math.PI, false);
            ctx.stroke();
            ctx.fill();
            ctx.beginPath();
            ctx.fillStyle = "red";
            ctx.arc(x + 90, y + 30 * 3, 10, 0, 2 * Math.PI, false);
            ctx.stroke();
            ctx.fill();
            ctx.restore();
        }

        // Simulates multiplication by (12...n) by making a new permutation
        // whose values are the old ones shifted +1 (and looped around)
        function permute_big() {
            // Temporary array to store old values while updating
            var old_permutation = Array(number_of_points);
            for (var i = 0; i < number_of_points; i++) {
                old_permutation[i] = permutation[i];
            }
            // Updating the permutation
            for (var i = 0; i < number_of_points; i++) {
                permutation[i] = (old_permutation[(i + 1) % number_of_points]);
            }
            // Prepending a (12...n)
            document.getElementById("info").innerHTML = "(12...<i>n</i>)" + document.getElementById("info").innerHTML;
            // Updating the permutation
            create_table();
        }

        // Swaps the first two values of the permutation
        function permute_small() {
            var temp = permutation[0];
            permutation[0] = permutation[1];
            permutation[1] = temp;
            // Prepending a (12)
            document.getElementById("info").innerHTML = "(12)" + document.getElementById("info").innerHTML;
            // Updating the permutation
            create_table();
        }

        function increment_elements() {
            number_of_points += 1;
            permutation = Array(number_of_points);
            for (var i = 0; i < number_of_points; i++) {
                permutation[i] = i;
            }
            create_table();
            document.getElementById("info").innerHTML = "";
        }

        function decrement_elements() {
            number_of_points -= 1;
            if (number_of_points < 1) {
                number_of_points = 1;
            }
            permutation = Array(number_of_points);
            for (var i = 0; i < number_of_points; i++) {
                permutation[i] = i;
            }
            create_table();
            document.getElementById("info").innerHTML = "";
        }

        function draw() {
            const ctx = document.getElementById("canvas").getContext("2d");
            ctx.textAlign = "center";


            ctx.clearRect(0, 0, 1000, 1000); // clear canvas
            ctx.fillStyle = "white";

            ctx.save();
            ctx.translate(150, 150);

            ctx.restore();

            draw_regular_poly_dots(ctx, number_of_points, 200, 300, 250);
            draw_legend(ctx, 520, 300);

            window.requestAnimationFrame(draw);
        }

        init();
    </script>

</body>

</html>
